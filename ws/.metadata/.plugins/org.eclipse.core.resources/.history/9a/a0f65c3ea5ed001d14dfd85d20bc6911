package concesionario.model;
import javax.mail.*;
import javax.mail.internet.*;

import java.util.Properties;

public class Correo {

  public static void enviarCorreo(String destinatario, String asunto, String mensaje) throws MessagingException {

    // Configuración del servidor de correo
    String correoEmisor = "mi_correo@gmail.com";
    String passwordEmisor = "mi_contraseña";
    String servidorSMTP = "smtp.gmail.com";
    int puertoSMTP = 587;

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", servidorSMTP);
    props.put("mail.smtp.port", puertoSMTP);

    // Autenticación en el servidor de correo
    Session sesion = Session.getInstance(props,
      new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
          return new PasswordAuthentication(correoEmisor, passwordEmisor);
        }
      });

    // Creación del mensaje de correo
    Message mensajeCorreo = new MimeMessage(sesion);
    mensajeCorreo.setFrom(new InternetAddress(correoEmisor));
    mensajeCorreo.setRecipients(Message.RecipientType.TO, InternetAddress.parse(destinatario));
    mensajeCorreo.setSubject(asunto);
    mensajeCorreo.setText(mensaje);

    // Envío del correo
    Transport.send(mensajeCorreo);
  }
}
